admin,python -m unittest test_commands.py
admin,python -m unittest test_commands.py
admin,test_commands.py
admin,test_commands.py
admin,exit
admin,python -m unittest test_commands.py
admin,test_commands.py
admin,python shell_emulator.py
admin,ls
admin,clear
admin,cat file1.txt
admin,cat file1.txt
admin,python3 shell_emulator.py
admin,cat file1.txt
admin,cat dir1/file1.txt
admin,clear
admin,cat dir2/file2.txt
admin,clear
admin,cls
admin,cls
admin,cat dir1/file1.txt
admin,cat dir2/file2.txt
admin,clear
admin,cat dir2/file2.txt
admin,clear
admin,cd ..
admin,exit
admin,ls
admin,cd dir1
admin,"cd(""dir1"", ""/"")"
admin,"""cd dir1"
admin,"""cd dir1"""
admin,"command = ""cd dir1"""
admin,ls
admin,cd dir1
admin,cd 'dir1'
admin,pwd
admin,cd virtual_files.zip
admin,cd file1
admin,cd ..
admin,cd/
admin,cd //
admin,cd dir1
admin,cat file1
admin,cat dile1.txt
admin,cat file1.txt
admin,ls -1
admin,ls -a
admin,ls
admin,cd //
admin,ls -1
admin,ls dir1
admin,ls <dir1>
admin,ls <file1.txt>
admin,ls file1
admin,ls file1.txt
admin,ls -1
admin,exit
admin,ls -1
admin,ls
admin,exit
admin,
admin,ls
admin,ls -1
admin,cd //
admin,ls
admin,cd dir1
admin,exit
admin,ls
admin,cd dir1
admin,exit
admin,ls
admin,cd dir1
admin,ls
admin,ls dir1
admin,exit
admin,ls
admin,vfs
admin,ls dir 1
admin,ls dir1
admin,clear
admin,exit
admin,clear
admin,ls
admin,dir1
admin,ls dir1
admin,/dir1
admin,ls /dir1
admin,ls
admin,cd //
admin,clear
admin,cd dir1
admin,cd file.txt
admin,cat file1.txt
admin,cd dir2
admin,exit
admin,cd dir1
admin,cd //
admin,cd dir2
admin,cat file2.txt
admin,cd //
admin,cat file1.txt
admin,clear
admin,ls
admin,cd //
admin,clear
admin,cd dir1
admin,cat file1.txt
admin,ls
admin,cd //
admin,cd ..
admin,cd dir1
admin,cat file1.txt
admin,cd ..
admin,cd dir2
admin,cat file2.txt
admin,cd ..
admin,clear
admin,ls
admin,cd dir1
admin,cd ..
admin,cd //
admin,cd dir1
admin,ls
admin,cd ..
admin,cd //
admin,ls
admin,cat file1.txt
admin,strip
admin,exit
admin,ls
admin,cd dir1
admin,ls dir1
admin,ls
admin,exit
admin,ls
admin,ls
admin,cd dir1
admin,ls
admin,cd dir1
admin,exit
admin,ls
admin,cd dir1
admin,cd dir1
admin,exit
admin,ls
admin,cd dir1
admin,exit
admin,ls
admin,cd dir1
admin,cd file1.txt
admin,cd /dir1
admin,exit
admin,ls
admin,cd dir1
admin,cat file1.txt
admin,ls
admin,cd file1.txt
admin,cat file1.txt
admin,exit
admin,ls
admin,cd dir1
admin,cat file1.txt
admin,"print(f""Looking for file at: {file_path}"")"
admin,cd ..
admin,"print(f""Looking for file at: {file_path}"")"
admin,exit
admin,cat file1.txt
admin,cd dir1
admin,cat file1.txt
admin,exit
admin,ls
admin,exit
admin,ls
admin,self
admin,exit
admin,ls
admin,ls
admin,cd dir1
admin,exit
admin,ls
admin,cd dir1
admin,cat file1.txt
admin,exit
admin,ls
admin,cd dir1
admin,cd dir2
admin,cd dir3
admin,cd dir4
admin,cd
admin,cd //
admin,cd ..
admin,exit
admin,ls
admin,cd dir1
admin,exit
admin,exit
admin,ls
admin,cd dir1
admin,cat file1.txt
admin,exit
admin,ls
admin,cd file1.txt
admin,cd dir1
admin,cd file1.txt
admin,"cd ""dir1"""
admin,exit
admin,ls
admin,cd dir1
admin,cat file1.txt
admin,cd ..
admin,cat file2.txt
admin,cd dir2
admin,cat file2.txt
admin,cd ..
admin,cd dir3
admin,cat file3.txt
admin,exit
admin,ls
admin,cd dir1
admin,cat file1.txt
admin,exit
admin,exit
admin,ls
admin,exit
admin,ls
admin,exit
admin,ls
admin,exit
admin,ls
admin,cd dir1
admin,exit
admin,ls
admin,cd dir1
admin,exit
admin,ls
admin,cd dir1
admin,exit
admin,ls
admin,cd dir1
admin,ls
admin,cat file1.txt
admin,cd ..
admin,cd ..
admin,cd
admin,clear
admin,ls
admin,cd dir2
admin,ls
admin,cat file2.txt
admin,cd
admin,cd dir3
admin,;s
admin,ls
admin,cat file3.txt
admin,cd ..
admin,cd
admin,exit
admin,ls
admin,exit
admin,ls
admin,cd dir1
admin,cat file1.txt
admin,cd ..
admin,cd..
admin,cd //
admin,cd ./
admin,cd/.
admin,cd /.
admin,cd
admin,cd ..
admin,cd dir2
admin,cd ./
admin,cd
admin,cd ..
admin,cd /
admin,cd dir2
admin,cat file2.txt
admin,cd /
admin,cd dir3
admin,cat file3.txt
admin,clear
admin,ls
admin,cd dir1
admin,cat file1.txt
admin,cd
admin,ls
admin,cd..
admin,cd ..
admin,cd /
admin,cd di2
admin,cd dir2
admin,ls
admin,cat file2.txt
admin,cd /
admin,clear
admin,cd ..
admin,ls
admin,cd /
admin,ls
admin,cd ..
admin,ls
admin,cd ./
admin,cd /.
admin,ls
admin,exit
admin,ls,2024-11-19 18:52:27.669852
admin,ls,2024-11-19 18:54:57.305134
admin,ls,2024-11-19 18:55:33.440526
admin,ls,2024-11-19 18:56:34.312789
admin,exit,2024-11-19 18:57:51.360512
admin,ls
admin,cd dir1
admin,cd
admin,cd ..
admin,ls
admin,cd
admin,cd ./
admin,cd /.
admin,ls
admin,dir1
admin,cd dir
admin,cd dir1
admin,ls
admin,cat file1.txt
admin,exit
admin,ls
admin,clear
admin,exit
admin,ls
admin,cd dir1
admin,ls
admin,cat file1.txt
admin,cd ..
admin,ls
admin,cd /.
admin,ls
admin,exit
admin,ls
admin,cd dir1
admin,ls
admin,cat file1.txt
admin,cd ..
admin,ls
admin,cd ./
admin,ls
admin,cd
admin,cd /.
admin,;s
admin,ls
admin,"C:\annaconda\python.exe ""C:/Program Files/JetBrains/PyCharm Community Edition 2024.3/plugins/python-ce/helpers/pycharm/_jb_pytest_runner.py"" --path C:\Users\ПК\emulator-shell-os\src\test_commands.py"
admin,Testing started at 20:17 ...
admin,Launching pytest with arguments C:\Users\ПК\emulator-shell-os\src\test_commands.py --no-header --no-summary -q in C:\Users\ПК\emulator-shell-os\src
admin,
admin,============================= test session starts =============================
admin,collecting ... collected 4 items
admin,
admin,test_commands.py::TestCommandExecutor::test_cat FAILED                   [ 25%]
admin,test_commands.py:26 (TestCommandExecutor.test_cat)
admin,self = <test_commands.TestCommandExecutor testMethod=test_cat>
admin,mock_stdout = <_io.StringIO object at 0x0000026B1E1C4790>
admin,
admin,"@patch('sys.stdout', new_callable=StringIO)"
admin,"def test_cat(self, mock_stdout):"
admin,"""""""Тестируем команду cat, чтобы она выводила содержимое файла."""""""
admin,"executor = CommandExecutor(""test_vfs"", ""/dir1"")"
admin,"executor.cat(""file1.txt"")"
admin,output = mock_stdout.getvalue()
admin,">       self.assertIn(""Hello, World!"", output)  # Проверяем, что содержимое file1.txt отображается"
admin,"E       AssertionError: 'Hello, World!' not found in ""Trying to open file at: test_vfs\\dir1\\file1.txt\nError: File 'file1.txt' does not exist.\n"""
admin,
admin,test_commands.py:33: AssertionError
admin,
admin,test_commands.py::TestCommandExecutor::test_cd FAILED                    [ 50%]
admin,test_commands.py:17 (TestCommandExecutor.test_cd)
admin,self = <test_commands.TestCommandExecutor testMethod=test_cd>
admin,mock_stdout = <_io.StringIO object at 0x0000026B1E1C48B0>
admin,
admin,"@patch('sys.stdout', new_callable=StringIO)"
admin,"def test_cd(self, mock_stdout):"
admin,"""""""Тестируем команду cd, чтобы она меняла текущую директорию."""""""
admin,"executor = CommandExecutor(""test_vfs"", ""/"")"
admin,"executor.cd(""dir1"")"
admin,output = mock_stdout.getvalue()
admin,"self.assertIn(""Current directory:"", output)  # Проверяем, что путь изменился"
admin,">       self.assertIn(""/dir1"", output)  # Проверяем, что путь включает dir1"
admin,E       AssertionError: '/dir1' not found in 'Current directory: C:\\Users\\ПК\\emulator-shell-os\\src\\\\dir1\n'
admin,
admin,test_commands.py:25: AssertionError
admin,
admin,test_commands.py::TestCommandExecutor::test_cd_to_root FAILED            [ 75%]
admin,test_commands.py:34 (TestCommandExecutor.test_cd_to_root)
admin,self = <test_commands.TestCommandExecutor testMethod=test_cd_to_root>
admin,mock_stdout = <_io.StringIO object at 0x0000026B1E1C4940>
admin,
admin,"@patch('sys.stdout', new_callable=StringIO)"
admin,"def test_cd_to_root(self, mock_stdout):"
admin,"""""""Тестируем команду cd, чтобы вернуться в корневую директорию."""""""
admin,"executor = CommandExecutor(""test_vfs"", ""/dir1"")"
admin,"executor.cd(""/"")  # Переход в корень"
admin,output = mock_stdout.getvalue()
admin,">       self.assertIn(""Current directory: /"", output)  # Проверяем, что возвращаемся в корень"
admin,E       AssertionError: 'Current directory: /' not found in 'Current directory: C:\\Users\\ПК\\emulator-shell-os\\src\\\n'
admin,
admin,test_commands.py:41: AssertionError
admin,
admin,test_commands.py::TestCommandExecutor::test_ls PASSED                    [100%]
admin,
admin,"========================= 3 failed, 1 passed in 0.07s ========================="
admin,
admin,Process finished with exit code 1
admin,ls
admin,exit
admin,ls
admin,cd dir1
admin,ls
admin,cat file1.txt
admin,cd
admin,cd..
admin,cd //
admin,ls
admin,cd ./
admin,ls
admin,cd ./
admin,ls
admin,ls
admin,cd dir1
admin,cd..
admin,cd//
admin,cd./
admin,cd/.
admin,cd //
admin,ls
admin,cd ./
admin,cd \.
admin,cd \
admin,clear
admin,ls
admin,cd dir1
admin,ls
admin,cat file1.txt
admin,cd ..
admin,ls
admin,cd /
admin,ls
admin,cd dir2
admin,ls
admin,cat file1.txt
admin,cat file2.txt
admin,cd /
admin,ls
admin,cd ..
admin,ls
admin,cd /
admin,cd dir1
admin,cd ..
admin,;s
admin,ls
admin,exit
admin,ls
admin,cd ..
admin,ls,2024-11-19 21:11:54.398288
admin,cd dir1,2024-11-19 21:11:57.681121
admin,ls,2024-11-19 21:12:01.114863
admin,cat file1.txt,2024-11-19 21:12:07.719283
admin,cd ..,2024-11-19 21:12:12.737883
admin,ls,2024-11-19 21:12:14.506988
admin,cd ..,2024-11-19 21:12:17.193477
admin,ls,2024-11-19 21:12:19.264135
admin,exit,2024-11-19 21:12:37.477355
admin,cd ..
admin,exit
admin,ls
admin,cd dir1
admin,ls
admin,exit
admin,ls
admin,cd dir1
admin,ls
admin,exit
admin,ls
admin,import os
admin,from pathlib import Path
admin,
admin,class CommandExecutor:
admin,"def __init__(self, vfs_root, current_dir):"
admin,"""""""Инициализация исполнителя команд."""""""
admin,self.vfs_root = Path(vfs_root)  # Корень виртуальной файловой системы
admin,self.current_dir = Path(current_dir).resolve()  # Текущая директория как Path
admin,
admin,"def execute(self, command):"
admin,"""""""Выполнение команды."""""""
admin,"if command.startswith(""ls""):"
admin,return self.ls()
admin,"elif command.startswith(""cd""):"
admin,"new_dir = command.split("" "", 1)[1] if "" "" in command else """""
admin,self.cd(new_dir)
admin,return None  # Изменение директории не требует вывода
admin,"elif command.startswith(""cat""):"
admin,"file_name = command.split("" "", 1)[1] if "" "" in command else """""
admin,return self.cat(file_name)
admin,"elif command == ""clear"":"
admin,self.clear()
admin,else:
admin,"return f""Unknown command: {command}"""
admin,
admin,def ls(self):
admin,"""""""Вывод содержимого текущей директории."""""""
admin,try:
admin,# Нормализуем текущую директорию с помощью Path
admin,current_dir = self.current_dir / self.current_dir.name
admin,contents = []
admin,
admin,if not current_dir.exists() or not current_dir.is_dir():
admin,"print(f""Error: Directory '{self.current_dir}' does not exist."")"
admin,return
admin,
admin,# Получаем все элементы директории
admin,for item in current_dir.iterdir():
admin,if item.is_dir():
admin,"contents.append(f""[Dir] {item.name}"")"
admin,elif item.is_file():
admin,"contents.append(f""{item.name}"")"
admin,
admin,# Печатаем содержимое
admin,if contents:
admin,"print(""\n"".join(contents))"
admin,else:
admin,"print(f""No files or directories in '{self.current_dir}'."")"
admin,except Exception as e:
admin,"print(f""Error accessing directory contents: {e}"")"
admin,
admin,"def cd(self, new_dir):"
admin,"""""""Изменение текущей директории."""""""
admin,if not new_dir:
admin,"print(""Error: No directory specified."")"
admin,return
admin,
admin,"if new_dir == "".."":"
admin,if self.current_dir == self.vfs_root:
admin,"print(""You are already at the root directory."")"
admin,return
admin,else:
admin,# Переход на один уровень вверх
admin,self.current_dir = self.current_dir.parent
admin,"print(f""Current directory: {self.current_dir}"")"
admin,return
admin,
admin,# Абсолютный или относительный путь
admin,"target_dir = self.vfs_root / new_dir.lstrip(""/"")"
admin,
admin,# Нормализуем путь
admin,target_dir = target_dir.resolve()
admin,
admin,if not target_dir.exists() or not target_dir.is_dir():
admin,"print(f""Error: Directory '{new_dir}' does not exist."")"
admin,else:
admin,self.current_dir = target_dir
admin,"print(f""Current directory: {self.current_dir}"")"
admin,
admin,"def cat(self, file_name):"
admin,"""""""Вывод содержимого файла."""""""
admin,if not file_name:  # Если имя файла не указано
admin,"return ""Error: No file name provided."""
admin,
admin,file_path = self.vfs_root / self.current_dir / file_name  # Строим путь к файлу
admin,
admin,# Проверка существования файла
admin,if not file_path.exists() or not file_path.is_file():
admin,"return f""Error: File '{file_name}' does not exist."""
admin,
admin,# Чтение и возврат содержимого файла
admin,try:
admin,"with open(file_path, ""r"") as file:"
admin,return file.read()  # Возвращаем содержимое файла
admin,except Exception as e:
admin,"return f""Error reading file '{file_name}': {e}"""
admin,
admin,def clear(self):
admin,"""""""Очистка экрана."""""""
admin,"os.system(""cls"" if os.name == ""nt"" else ""clear"")"
admin,exit
admin,ls
admin,cat dir1
admin,cd dir1
admin,ls
admin,cat file1.txt
admin,cd ..
admin,ls
admin,cd ..
admin,cd /
admin,ls
admin,cd ..
admin,cd dir3
admin,ls
admin,cat file3.txt
admin,clear
admin,exit
admin,ls
admin,ls
admin,cd ..
admin,cd /
admin,cd \
admin,ls
admin,exit
admin,ls
admin,cd
admin,cd .
admin,cd /
admin,cd/
admin,cd..
admin,cd..
admin,cd ..
admin,cd \\
admin,cd //
admin,ls
admin,exit
admin,ls
admin,cd
admin,cd..
admin,cd //
admin,cd /
admin,cd/
admin,cd/.
admin,cd /.
admin,ls
admin,//
admin,..
admin,cd ..
admin,..
admin,ls
admin,lf
admin,lg
admin,lr
admin,ls
admin,cd
admin,cd
admin,cd /
admin,cd .
admin,cd ..
admin,cd dir1
admin,ls
admin,lg
admin,ls
admin,cd ..
admin,cd dir1
admin,cd //
admin,cd ..
admin,ls
admin,find dir1
admin,cat file1
admin,cat file1.txt
admin,cd dir1
admin,cat file1.txt
admin,cler
admin,clear
admin,exit
admin,/src
admin,shell_emulator.py
admin,commands.py
admin,test_commands.py
admin,config.csv
admin,session_log.csv
admin,session_log.csv
admin,ls
admin,cd dir1
admin,ls
admin,cd file1.txt
admin,ls
admin,ls
admin,cd dir1
admin,ls
admin,cd file1.txt
admin,exit
admin,tac
admin,cd dir1
admin,tac
admin,tac dir1
admin,exit
admin,tac dir1
admin,ls
admin,mv
admin,tac file1.txt
admin,tac dir1.txt
admin,cd dir1
admin,tac file1.txt
admin,mv dir1/file1.txt dir2/file1_renamed.txt
admin,exit
admin,mv dir1/file1.txt dir2/file1_renamed.txt
admin,ls\
admin,cd dir1
admin,ls
admin,back
admin,cd dir2
admin,cd..
admin,cd ..
admin,cd dir2
admin,ls
admin,cd ..
admin,setup
admin,setUp
